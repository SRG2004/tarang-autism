version: 1.0
runtime: python3

build:
  commands:
    pre-build:
      - echo "ðŸ”§ Installing system dependencies..."
      - apt-get update && apt-get install -y build-essential libpq-dev curl
    build:
      - echo "ðŸ“¦ Installing Python dependencies..."
      - pip install --upgrade pip
      - pip install --no-cache-dir -r requirements.txt
    post-build:
      - echo "âœ… Build complete"
      - chmod +x start.sh

run:
  runtime-version: 3.11
  command: ./start.sh
  network:
    port: 8080
    env: vpc
  env:
    - name: PORT
      value: "8080"
    - name: HOST
      value: "0.0.0.0"
    - name: PYTHONUNBUFFERED
      value: "1"
    - name: PYTHONDONTWRITEBYTECODE
      value: "1"
